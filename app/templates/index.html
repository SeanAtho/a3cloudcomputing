{% extends "layout.html" %}
{% block title %}Home{% endblock %}

{% block content %}
<div class="container">
    <h2>Feed</h2>
    {% if current_user.is_authenticated %}
        <form action="{{ url_for('create_post') }}" method="post" class="post-form">
            <div class="form-group">
                <label for="post_body" class="sr-only">What's on your mind?</label>
                <textarea class="form-control" id="post_body" name="post_body" placeholder="What's on your mind?"></textarea>
            </div>
            <div class="form-group">
                <button type="submit" class="btn btn-primary">Post</button>
            </div>
        </form>
    {% else %}
        <p>Please <a href="{{ url_for('main.login') }}">login</a> to post something.</p>
    {% endif %}
    <div class="post-list">
        {% if posts %}
            {% for post in posts %}
                <div class="post">
                    <p><strong>{{ post.author.username }} says:</strong></p>
                    <p>{{ post.body }}</p>
                    <p><small>{{ post.timestamp.strftime('%b %d, %Y at %H:%M') }}</small></p>
                </div>
            {% endfor %}
        {% else %}
            <p>No posts to show. Be the first to post something!</p>
        {% endif %}
    </div>
</div>
{% endblock %}
